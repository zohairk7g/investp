<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>InvestPK â€” Add Earnings</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#0b0e17;
  --secondary:#1f1f2e;
  --accent:#162447;
  --highlight:#fca311;
  --text:#e0e0e0;
  --btn-bg:#00cc88;
  --shadow:rgba(0,255,100,0.3);
}
*{margin:0;padding:0;box-sizing:border-box;font-family:'Inter',sans-serif;}
body{background:var(--bg);color:var(--text);overflow-x:hidden;min-height:100vh;}
header{
  display:flex;justify-content:space-between;align-items:center;
  padding:15px 25px;background:var(--secondary);
  position:fixed;top:0;left:0;width:100%;z-index:10;
  box-shadow:0 4px 15px var(--shadow);
  border-bottom:2px solid var(--highlight);
}
.menu-toggle{font-size:24px;cursor:pointer;background:var(--btn-bg);padding:8px 12px;border-radius:6px;color:#000;transition:all 0.3s ease;}
.logo{font-size:26px;font-weight:600;color:var(--highlight);}
.balance{font-size:16px;background:var(--accent);padding:8px 16px;border-radius:8px;color:#fff;box-shadow:0 0 12px var(--shadow);}
.sidebar{
  position:fixed;top:0;left:-260px;width:260px;height:100%;
  background:var(--secondary);padding-top:60px;transition:left 0.3s;z-index:100;
  box-shadow:2px 0 15px var(--shadow);
}
.sidebar.active{left:0;}
.sidebar a{
  display:block;padding:15px 25px;color:var(--text);text-decoration:none;
  border-bottom:1px solid #1f3d1f;transition:background 0.2s;
}
.sidebar a:hover{background:var(--highlight);color:#000;}
.main-content{padding:100px 20px;text-align:center;}
.buttons{margin:30px 0;display:flex;flex-wrap:wrap;justify-content:center;gap:20px;}
.btn{
  background:var(--btn-bg);color:#000;padding:15px 25px;border:none;border-radius:10px;
  cursor:pointer;font-size:16px;transition:transform 0.3s, background 0.3s;box-shadow:0 4px 12px var(--shadow);
}
.btn:hover{background:var(--highlight);color:#000;transform:scale(1.05);box-shadow:0 0 15px var(--accent);}
.alert{
  background:#fca311;color:#000;padding:18px;border-radius:12px;margin-bottom:25px;
  max-width:650px;margin:15px auto;box-shadow:0 4px 15px var(--shadow);display:none;
}
.task-section{background:var(--secondary);padding:20px;border-radius:12px;margin:20px auto;max-width:650px;box-shadow:0 4px 15px var(--shadow);}
.task-section h2{color:var(--highlight);margin-bottom:15px;}
.task{margin-bottom:20px;}
.task button{margin-top:10px;}
#spinWheel{width:250px;height:250px;margin:20px auto;transition:transform 4s ease-out;border-radius:50%;border:8px solid var(--highlight);}
#rewardDisplay{margin-top:15px;font-size:18px;color:#00ff88;font-weight:600;}
.modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.8);justify-content:center;align-items:center;z-index:1000;}
.modal video{width:80%;border-radius:12px;}
.modal button{margin-top:10px;padding:10px 20px;border:none;border-radius:8px;background:var(--btn-bg);color:#000;font-weight:600;cursor:pointer;}
</style>
</head>
<body>

<header>
  <div class="menu-toggle" id="toggleBtn" onclick="toggleSidebar()">â˜°</div>
  <div class="logo">InvestPK</div>
  <div class="balance" id="balanceDisplay">â‚¨0.00</div>
</header>

<div class="sidebar" id="sidebar">
  <a href="index.html">Home</a>
  <a href="deposit.html">Deposit</a>
  <a href="withdraw.html">Withdrawal</a>
  <a href="plans.html">Plans</a>
  <a href="AddEarnings.html">Add Earnings</a>
  <a href="referral.html">Referral</a>
  <a href="customerSupport.html">Customer Support</a>
  <a href="settings.html">Settings</a>
  <a href="about.html">About</a>
  <a href="Notifications.html">Notifications</a>
</div>

<div class="main-content">
  <div class="alert" id="earnAlert">You reached your daily earning limit!</div>

  <div class="task-section">
    <h2>Daily Tasks</h2>
    <div class="task">
      <p>ðŸŽ¥ Watch Video (5% Plan Earning)</p>
      <button class="btn" onclick="watchVideo()">Watch & Earn</button>
    </div>
    <div class="task">
      <p>ðŸŽ¡ Spin the Wheel (10% Plan Earning)</p>
      <div id="spinWheel">ðŸŽ¡</div>
      <button class="btn" onclick="spinWheel()">Spin & Earn</button>
      <div id="rewardDisplay"></div>
    </div>
    <div class="task">
      <button class="btn" onclick="collectEarnings()">Collect Earnings</button>
    </div>
  </div>
</div>

<!-- Video Modal -->
<div class="modal" id="videoModal">
  <div style="text-align:center;">
    <video id="earnVideo" src="https://www.w3schools.com/html/mov_bbb.mp4" controls></video><br>
    <button onclick="videoCompleted()">Done Watching</button>
  </div>
</div>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
<script>
  // ---------------- Firebase Config ----------------
  const firebaseConfig = {
    apiKey: "YOUR_API_KEY",
    authDomain: "YOUR_PROJECT.firebaseapp.com",
    databaseURL: "https://YOUR_PROJECT.firebaseio.com",
    projectId: "YOUR_PROJECT",
    storageBucket: "YOUR_PROJECT.appspot.com",
    messagingSenderId: "YOUR_ID",
    appId: "YOUR_APP_ID"
  };
  firebase.initializeApp(firebaseConfig);
  const db = firebase.database();

  // Sidebar toggle
  function toggleSidebar(){
    const sidebar=document.getElementById('sidebar');
    const toggleBtn=document.getElementById('toggleBtn');
    sidebar.classList.toggle('active');
    toggleBtn.textContent=sidebar.classList.contains('active')?'âœ–':'â˜°';
  }
  document.addEventListener('click',function(e){
    const sidebar=document.getElementById('sidebar');
    const toggleBtn=document.getElementById('toggleBtn');
    if(!sidebar.contains(e.target) && !toggleBtn.contains(e.target)){
      sidebar.classList.remove('active');
      toggleBtn.textContent='â˜°';
    }
  });

  // ----------------- User Data -----------------
  let userId = "user123"; // Replace with logged-in user ID
  let planPercent = 15; // Max daily earning %
  let dailyEarned = 0;
  let tasks = { video:false, spin:false };

  const balanceDisplay=document.getElementById('balanceDisplay');
  function updateBalanceDisplay(){
    db.ref('users/'+userId+'/balance').once('value').then(snapshot=>{
      const balance = snapshot.val() || 0;
      balanceDisplay.textContent = "â‚¨"+(balance + dailyEarned).toFixed(2);
    });
  }
  updateBalanceDisplay();

  // ----------------- Watch Video Task -----------------
  function watchVideo(){
    if(tasks.video){
      alert("Video task already completed today!");
      return;
    }
    document.getElementById('videoModal').style.display='flex';
  }
  function videoCompleted(){
    document.getElementById('videoModal').style.display='none';
    tasks.video=true;
    dailyEarned += planPercent*0.05;
    updateBalanceDisplay();
    checkLimit();
    alert("Video task completed! Earned 5%");
  }

  // ----------------- Spin Wheel Task -----------------
  function spinWheel(){
    if(tasks.spin){
      alert("Spin task already completed today!");
      return;
    }
    const wheel = document.getElementById('spinWheel');
    const rewardDisplay = document.getElementById('rewardDisplay');
    let rewardPercent = Math.floor(Math.random()*10)+5; // 5% to 15% max
    if(dailyEarned + rewardPercent>planPercent) rewardPercent = planPercent - dailyEarned;
    let degree = Math.floor(Math.random()*360) + 720; // rotate 2 times
    wheel.style.transform=`rotate(${degree}deg)`;
    setTimeout(()=>{
      rewardDisplay.textContent = "You earned "+rewardPercent.toFixed(2)+"%";
      dailyEarned += rewardPercent;
      tasks.spin=true;
      updateBalanceDisplay();
      checkLimit();
    },4000);
  }

  // ----------------- Collect Earnings -----------------
  function collectEarnings(){
    if(dailyEarned<=0){
      alert("No earnings to collect!");
      return;
    }
    db.ref('users/'+userId+'/balance').once('value').then(snapshot=>{
      let balance = snapshot.val() || 0;
      balance += dailyEarned;
      db.ref('users/'+userId+'/balance').set(balance);
      dailyEarned=0;
      tasks={video:false, spin:false};
      document.getElementById('rewardDisplay').textContent="";
      alert("Daily earnings collected! Balance updated.");
      updateBalanceDisplay();
    });
  }

  function checkLimit(){
    if(dailyEarned>=planPercent){
      document.getElementById('earnAlert').style.display='block';
    }
  }

</script>

</body>
</html>
